define(["./Transforms-73e77b72","./Cartesian2-b4b7b0b3","./Check-5e798bbf","./when-208fe5b0","./Math-8386669c","./ArcType-dc1c5aee","./arrayRemoveDuplicates-3a9a9480","./ComponentDatatype-2da3a966","./EllipsoidGeodesic-92f0d3cc","./EllipsoidRhumbLine-73a4e3eb","./EncodedCartesian3-21af0f3b","./GeometryAttribute-b541caa6","./IntersectionTests-40db2afa","./Plane-b91bfb59","./WebMercatorProjection-1b058022","./RuntimeError-7f634f5d","./WebGLConstants-5e2a49ab"],(function(e,a,t,n,i,r,s,o,l,u,c,C,p,h,d,g,f){"use strict";function m(t){t=n.defaultValue(t,n.defaultValue.EMPTY_OBJECT),this._ellipsoid=n.defaultValue(t.ellipsoid,a.Ellipsoid.WGS84),this._rectangle=n.defaultValue(t.rectangle,a.Rectangle.MAX_VALUE),this._projection=new e.GeographicProjection(this._ellipsoid),this._numberOfLevelZeroTilesX=n.defaultValue(t.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=n.defaultValue(t.numberOfLevelZeroTilesY,1)}Object.defineProperties(m.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),m.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},m.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},m.prototype.rectangleToNativeRectangle=function(e,t){var r=i.CesiumMath.toDegrees(e.west),s=i.CesiumMath.toDegrees(e.south),o=i.CesiumMath.toDegrees(e.east);e=i.CesiumMath.toDegrees(e.north);return n.defined(t)?(t.west=r,t.south=s,t.east=o,t.north=e,t):new a.Rectangle(r,s,o,e)},m.prototype.tileXYToNativeRectangle=function(e,a,t,n){return(n=this.tileXYToRectangle(e,a,t,n)).west=i.CesiumMath.toDegrees(n.west),n.south=i.CesiumMath.toDegrees(n.south),n.east=i.CesiumMath.toDegrees(n.east),n.north=i.CesiumMath.toDegrees(n.north),n},m.prototype.tileXYToRectangle=function(e,t,i,r){var s=this._rectangle,o=this.getNumberOfXTilesAtLevel(i),l=this.getNumberOfYTilesAtLevel(i);o=e*(i=s.width/o)+s.west,e=(e+1)*i+s.west,i=s.height/l,l=s.north-t*i,i=s.north-(t+1)*i;return(r=n.defined(r)?r:new a.Rectangle(o,i,e,l)).west=o,r.south=i,r.east=e,r.north=l,r},m.prototype.positionToTileXY=function(e,t,r){var s=this._rectangle;if(a.Rectangle.contains(s,e)){var o=this.getNumberOfXTilesAtLevel(t),l=this.getNumberOfYTilesAtLevel(t),u=s.width/o,c=s.height/l;t=e.longitude;return s.east<s.west&&(t+=i.CesiumMath.TWO_PI),o<=(u=(t-s.west)/u|0)&&(u=o-1),l<=(c=(s.north-e.latitude)/c|0)&&(c=l-1),n.defined(r)?(r.x=u,r.y=c,r):new a.Cartesian2(u,c)}};var w=new a.Cartesian3,y=new a.Cartesian3,v=new a.Cartographic,M=new a.Cartesian3,T=new a.Cartesian3,E=new e.BoundingSphere,_=new m,b=[new a.Cartographic,new a.Cartographic,new a.Cartographic,new a.Cartographic],O=new a.Cartesian2,P={};function k(e){a.Cartographic.fromRadians(e.east,e.north,0,b[0]),a.Cartographic.fromRadians(e.west,e.north,0,b[1]),a.Cartographic.fromRadians(e.east,e.south,0,b[2]),a.Cartographic.fromRadians(e.west,e.south,0,b[3]);for(var t=0,n=0,i=0,r=0,s=P._terrainHeightsMaxLevel,o=0;o<=s;++o){for(var l=!1,u=0;u<4;++u)if(_.positionToTileXY(b[u],o,O),0===u)i=O.x,r=O.y;else if(i!==O.x||r!==O.y){l=!0;break}if(l)break;t=i,n=r}if(0!==o)return{x:t,y:n,level:s<o?s:o-1}}P.initialize=function(){var a=P._initPromise;return n.defined(a)?a:(a=e.Resource.fetchJson(e.buildModuleUrl("Assets/approximateTerrainHeights.json")).then((function(e){P._terrainHeights=e})),P._initPromise=a)},P.getMinimumMaximumHeights=function(e,t){t=n.defaultValue(t,a.Ellipsoid.WGS84);var i=k(e),r=P._defaultMinTerrainHeight,s=P._defaultMaxTerrainHeight;return n.defined(i)&&(i=i.level+"-"+i.x+"-"+i.y,i=P._terrainHeights[i],n.defined(i)&&(r=i[0],s=i[1]),t.cartographicToCartesian(a.Rectangle.northeast(e,v),w),t.cartographicToCartesian(a.Rectangle.southwest(e,v),y),a.Cartesian3.midpoint(y,w,M),t=t.scaleToGeodeticSurface(M,T),r=n.defined(t)?(t=a.Cartesian3.distance(M,t),Math.min(r,-t)):P._defaultMinTerrainHeight),{minimumTerrainHeight:r=Math.max(P._defaultMinTerrainHeight,r),maximumTerrainHeight:s}},P.getBoundingSphere=function(t,i){i=n.defaultValue(i,a.Ellipsoid.WGS84);var r=k(t),s=P._defaultMaxTerrainHeight;n.defined(r)&&(o=r.level+"-"+r.x+"-"+r.y,o=P._terrainHeights[o],n.defined(o)&&(s=o[1]));var o=e.BoundingSphere.fromRectangle3D(t,i,0);return e.BoundingSphere.fromRectangle3D(t,i,s,E),e.BoundingSphere.union(o,E,o)},P._terrainHeightsMaxLevel=6,P._defaultMaxTerrainHeight=9e3,P._defaultMinTerrainHeight=-1e5,P._terrainHeights=void 0,P._initPromise=void 0,Object.defineProperties(P,{initialized:{get:function(){return n.defined(P._terrainHeights)}}});var A=[e.GeographicProjection,d.WebMercatorProjection],L=A.length,S=Math.cos(i.CesiumMath.toRadians(30)),I=Math.cos(i.CesiumMath.toRadians(150));function x(e){var t=(e=n.defaultValue(e,n.defaultValue.EMPTY_OBJECT)).positions;this.width=n.defaultValue(e.width,1),this._positions=t,this.granularity=n.defaultValue(e.granularity,9999),this.loop=n.defaultValue(e.loop,!1),this.arcType=n.defaultValue(e.arcType,r.ArcType.GEODESIC),this._ellipsoid=a.Ellipsoid.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(x.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+a.Ellipsoid.packedLength+1+1}}}),x.setProjectionAndEllipsoid=function(e,a){for(var t=0,n=0;n<L;n++)if(a instanceof A[n]){t=n;break}e._projectionIndex=t,e._ellipsoid=a.ellipsoid};var N=new a.Cartesian3,R=new a.Cartesian3,D=new a.Cartesian3;function z(e,t,n,i,r){var s=F(i,e,0,N);n=F(i,e,n,R),t=F(i,t,0,D),n=q(n,s,R),s=q(t,s,D);return a.Cartesian3.cross(s,n,r),a.Cartesian3.normalize(r,r)}var H=new a.Cartographic,B=new a.Cartesian3,j=new a.Cartesian3,G=new a.Cartesian3;function V(e,t,n,i,s,o,c,C,p,h,d){var g;if(0!==s&&(o===r.ArcType.GEODESIC?g=new l.EllipsoidGeodesic(e,t,c):o===r.ArcType.RHUMB&&(g=new u.EllipsoidRhumbLine(e,t,c)),!((o=g.surfaceDistance)<s)))for(var f=z(e,t,i,c,G),m=o/(s=Math.ceil(o/s)),w=m,y=s-1,v=C.length,M=0;M<y;M++){var T=g.interpolateUsingSurfaceDistance(w,H),E=F(c,T,n,B),_=F(c,T,i,j);a.Cartesian3.pack(f,C,v),a.Cartesian3.pack(E,p,v),a.Cartesian3.pack(_,h,v),d.push(T.latitude),d.push(T.longitude),v+=3,w+=m}}var Y=new a.Cartographic;function F(e,t,n,i){return a.Cartographic.clone(t,Y),Y.height=n,a.Cartographic.toCartesian(Y,e,i)}function q(e,t,n){return a.Cartesian3.subtract(e,t,n),a.Cartesian3.normalize(n,n),n}function X(e,t,n,i){return i=q(e,t,i),i=a.Cartesian3.cross(i,n,i),i=a.Cartesian3.normalize(i,i),a.Cartesian3.cross(n,i,i)}x.pack=function(e,t,i){var r=n.defaultValue(i,0),s=e._positions,o=s.length;t[r++]=o;for(var l=0;l<o;++l){var u=s[l];a.Cartesian3.pack(u,t,r),r+=3}return t[r++]=e.granularity,t[r++]=e.loop?1:0,t[r++]=e.arcType,a.Ellipsoid.pack(e._ellipsoid,t,r),r+=a.Ellipsoid.packedLength,t[r++]=e._projectionIndex,t[r++]=e._scene3DOnly?1:0,t},x.unpack=function(e,t,i){for(var r=n.defaultValue(t,0),s=e[r++],o=new Array(s),l=0;l<s;l++)o[l]=a.Cartesian3.unpack(e,r),r+=3;var u=e[r++],c=1===e[r++],C=e[r++],p=a.Ellipsoid.unpack(e,r);r+=a.Ellipsoid.packedLength;var h=e[r++];t=1===e[r++];return(i=n.defined(i)?i:new x({positions:o}))._positions=o,i.granularity=u,i.loop=c,i.arcType=C,i._ellipsoid=p,i._projectionIndex=h,i._scene3DOnly=t,i};var W=new a.Cartesian3,U=new a.Cartesian3,Z=new a.Cartesian3,J=new a.Cartesian3;function Q(e,t,n,r,s){return e=X(e,t,n=q(n,t,J),W),t=X(r,t,n,U),i.CesiumMath.equalsEpsilon(a.Cartesian3.dot(e,t),-1,i.CesiumMath.EPSILON5)?(s=a.Cartesian3.cross(n,e,s),a.Cartesian3.normalize(s,s)):(s=a.Cartesian3.add(t,e,s),s=a.Cartesian3.normalize(s,s),n=a.Cartesian3.cross(n,s,Z),a.Cartesian3.dot(t,n)<0?a.Cartesian3.negate(s,s):s)}var K=h.Plane.fromPointNormal(a.Cartesian3.ZERO,a.Cartesian3.UNIT_Y),$=new a.Cartesian3,ee=new a.Cartesian3,ae=new a.Cartesian3,te=new a.Cartesian3,ne=new a.Cartesian3,ie=new a.Cartesian3,re=new a.Cartographic,se=new a.Cartographic,oe=new a.Cartographic;x.createGeometry=function(t){var l,h,d,g,f,m=!t._scene3DOnly,w=t.loop,y=t._ellipsoid,v=t.granularity,M=t.arcType,T=new A[t._projectionIndex](y),E=1e3,_=t._positions,b=_.length;2===b&&(w=!1);for(var O,k,L,I=new u.EllipsoidRhumbLine(void 0,void 0,y),x=[_[0]],N=0;N<b-1;N++)h=_[N],d=_[N+1],O=p.IntersectionTests.lineSegmentPlane(h,d,K,ie),!n.defined(O)||a.Cartesian3.equalsEpsilon(O,h,i.CesiumMath.EPSILON7)||a.Cartesian3.equalsEpsilon(O,d,i.CesiumMath.EPSILON7)||(t.arcType===r.ArcType.GEODESIC?x.push(a.Cartesian3.clone(O)):t.arcType===r.ArcType.RHUMB&&(L=y.cartesianToCartographic(O,re).longitude,g=y.cartesianToCartographic(h,re),f=y.cartesianToCartographic(d,se),I.setEndPoints(g,f),k=I.findIntersectionWithLongitude(L,oe),O=y.cartographicToCartesian(k,ie),!n.defined(O)||a.Cartesian3.equalsEpsilon(O,h,i.CesiumMath.EPSILON7)||a.Cartesian3.equalsEpsilon(O,d,i.CesiumMath.EPSILON7)||x.push(a.Cartesian3.clone(O)))),x.push(d);w&&(h=_[b-1],d=_[0],O=p.IntersectionTests.lineSegmentPlane(h,d,K,ie),!n.defined(O)||a.Cartesian3.equalsEpsilon(O,h,i.CesiumMath.EPSILON7)||a.Cartesian3.equalsEpsilon(O,d,i.CesiumMath.EPSILON7)||(t.arcType===r.ArcType.GEODESIC?x.push(a.Cartesian3.clone(O)):t.arcType===r.ArcType.RHUMB&&(L=y.cartesianToCartographic(O,re).longitude,g=y.cartesianToCartographic(h,re),f=y.cartesianToCartographic(d,se),I.setEndPoints(g,f),k=I.findIntersectionWithLongitude(L,oe),O=y.cartographicToCartesian(k,ie),!n.defined(O)||a.Cartesian3.equalsEpsilon(O,h,i.CesiumMath.EPSILON7)||a.Cartesian3.equalsEpsilon(O,d,i.CesiumMath.EPSILON7)||x.push(a.Cartesian3.clone(O)))));var R=x.length,D=new Array(R);for(N=0;N<R;N++){var H=a.Cartographic.fromCartesian(x[N],y);H.height=0,D[N]=H}if(!((R=(D=s.arrayRemoveDuplicates(D,a.Cartographic.equalsEpsilon)).length)<2)){var B=[],j=[],G=[],Y=[],X=$,W=ee,U=ae,Z=te,J=ne,le=D[0],ue=D[1];for(X=F(y,D[R-1],0,X),Z=F(y,ue,0,Z),W=F(y,le,0,W),U=F(y,le,E,U),J=w?Q(X,W,U,Z,J):z(le,ue,E,y,J),a.Cartesian3.pack(J,j,0),a.Cartesian3.pack(W,G,0),a.Cartesian3.pack(U,Y,0),B.push(le.latitude),B.push(le.longitude),V(le,ue,0,E,v,M,y,j,G,Y,B),N=1;N<R-1;++N){X=a.Cartesian3.clone(W,X),W=a.Cartesian3.clone(Z,W);var ce=D[N];F(y,ce,E,U),F(y,D[N+1],0,Z),Q(X,W,U,Z,J),l=j.length,a.Cartesian3.pack(J,j,l),a.Cartesian3.pack(W,G,l),a.Cartesian3.pack(U,Y,l),B.push(ce.latitude),B.push(ce.longitude),V(D[N],D[N+1],0,E,v,M,y,j,G,Y,B)}var pe=D[R-1],he=D[R-2];if(W=F(y,pe,0,W),U=F(y,pe,E,U),J=w?(ue=D[0],Q(X=F(y,he,0,X),W,U,Z=F(y,ue,0,Z),J)):z(he,pe,E,y,J),l=j.length,a.Cartesian3.pack(J,j,l),a.Cartesian3.pack(W,G,l),a.Cartesian3.pack(U,Y,l),B.push(pe.latitude),B.push(pe.longitude),w){for(V(pe,le,0,E,v,M,y,j,G,Y,B),l=j.length,N=0;N<3;++N)j[l+N]=j[N],G[l+N]=G[N],Y[l+N]=Y[N];B.push(le.latitude),B.push(le.longitude)}return function(t,n,r,s,l,u,p){var h,d,g,f,m,w,y=n._ellipsoid,v=r.length/3-1,M=8*v,T=4*M,E=new(65535<M?Uint32Array:Uint16Array)(36*v),_=new Float64Array(3*M),b=new Float32Array(T),O=new Float32Array(T),k=new Float32Array(T),A=new Float32Array(T),L=new Float32Array(T);p&&(g=new Float32Array(T),f=new Float32Array(T),m=new Float32Array(T),w=new Float32Array(2*M));var I=u.length/2,x=0,N=Me;N.height=0;var R=Te;R.height=0;var D=Ee,z=_e;if(p)for(d=0,h=1;h<I;h++)N.latitude=u[d],N.longitude=u[d+1],R.latitude=u[d+2],R.longitude=u[d+3],D=n.project(N,D),z=n.project(R,z),x+=a.Cartesian3.distance(D,z),d+=2;var H=s.length/3;z=a.Cartesian3.unpack(s,0,z);var B,j=0;for(d=3,h=1;h<H;h++)D=a.Cartesian3.clone(z,D),z=a.Cartesian3.unpack(s,d,z),j+=a.Cartesian3.distance(D,z),d+=3;d=3;var G=0,V=0,Y=0,F=0,X=!1,W=a.Cartesian3.unpack(r,0,Oe),U=a.Cartesian3.unpack(s,0,_e),Z=a.Cartesian3.unpack(l,0,ke);t&&(Ce(Z,ga=a.Cartesian3.unpack(r,r.length-6,be),W,U)&&(Z=a.Cartesian3.negate(Z,Z)));var J,Q,K,$,ee,ae,te,ne=0,ie=0,re=0;for(h=0;h<v;h++){var se=a.Cartesian3.clone(W,be),oe=a.Cartesian3.clone(U,Ee),le=a.Cartesian3.clone(Z,Pe);X&&(le=a.Cartesian3.negate(le,le)),W=a.Cartesian3.unpack(r,d,Oe),U=a.Cartesian3.unpack(s,d,_e),X=Ce(Z=a.Cartesian3.unpack(l,d,ke),se,W,U),N.latitude=u[G],N.longitude=u[G+1],R.latitude=u[G+2],R.longitude=u[G+3],p&&(ha=function(e,a){var t=Math.abs(e.longitude),n=Math.abs(a.longitude);if(i.CesiumMath.equalsEpsilon(t,i.CesiumMath.PI,i.CesiumMath.EPSILON11)){var r=i.CesiumMath.sign(a.longitude);return e.longitude=r*(t-i.CesiumMath.EPSILON11),1}return i.CesiumMath.equalsEpsilon(n,i.CesiumMath.PI,i.CesiumMath.EPSILON11)?(e=i.CesiumMath.sign(e.longitude),a.longitude=e*(n-i.CesiumMath.EPSILON11),2):0}(N,R),J=n.project(N,Re),(na=q(Q=n.project(R,De),J,We)).y=Math.abs(na.y),K=ze,$=He,0===ha||a.Cartesian3.dot(na,a.Cartesian3.UNIT_Y)>S?(K=ge(n,N,le,J,ze),$=ge(n,R,Z,Q,He)):1===ha?($=ge(n,R,Z,Q,He),K.x=0,K.y=i.CesiumMath.sign(N.longitude-Math.abs(R.longitude)),K.z=0):(K=ge(n,N,le,J,ze),$.x=0,$.y=i.CesiumMath.sign(N.longitude-R.longitude),$.z=0));var ue=a.Cartesian3.distance(oe,U),ce=c.EncodedCartesian3.fromCartesian(se,qe),pe=a.Cartesian3.subtract(W,se,Be),he=a.Cartesian3.normalize(pe,Ve),de=a.Cartesian3.subtract(oe,se,je);de=a.Cartesian3.normalize(de,de);var fe=a.Cartesian3.cross(he,de,Ve);fe=a.Cartesian3.normalize(fe,fe);var me=a.Cartesian3.cross(de,le,Ye);me=a.Cartesian3.normalize(me,me);var ye=a.Cartesian3.subtract(U,W,Ge);ye=a.Cartesian3.normalize(ye,ye);var ea=a.Cartesian3.cross(Z,ye,Fe);ea=a.Cartesian3.normalize(ea,ea);var aa=ue/j,ta=ne/j,na=0,ia=0,ra=0;for(p&&(na=a.Cartesian3.distance(J,Q),ee=c.EncodedCartesian3.fromCartesian(J,Xe),ae=a.Cartesian3.subtract(Q,J,We),pa=(te=a.Cartesian3.normalize(ae,Ue)).x,te.x=te.y,te.y=-pa,ia=na/x,ra=ie/x),B=0;B<8;B++){var sa=F+4*B,oa=V+2*B,la=sa+3,ua=B<4?1:-1,ca=2===B||3===B||6===B||7===B?1:-1;a.Cartesian3.pack(ce.high,b,sa),b[la]=pe.x,a.Cartesian3.pack(ce.low,O,sa),O[la]=pe.y,a.Cartesian3.pack(me,k,sa),k[la]=pe.z,a.Cartesian3.pack(ea,A,sa),A[la]=aa*ua,a.Cartesian3.pack(fe,L,sa);var Ca=ta*ca;0===Ca&&ca<0&&(Ca=9),L[la]=Ca,p&&(g[sa]=ee.high.x,g[sa+1]=ee.high.y,g[sa+2]=ee.low.x,g[sa+3]=ee.low.y,m[sa]=-K.y,m[sa+1]=K.x,m[sa+2]=$.y,m[sa+3]=-$.x,f[sa]=ae.x,f[sa+1]=ae.y,f[sa+2]=te.x,f[sa+3]=te.y,w[oa]=ia*ua,0==(Ca=ra*ca)&&ca<0&&(Ca=9),w[oa+1]=Ca)}var pa,ha=xe;he=Ne,de=Se,le=Ie,ye=a.Rectangle.fromCartographicArray(Ae,Le);re+=ye=(pa=P.getMinimumMaximumHeights(ye,y)).minimumTerrainHeight,re+=pa=pa.maximumTerrainHeight,we(se,oe,ye,pa,ha,de),we(W,U,ye,pa,he,le),pa=a.Cartesian3.multiplyByScalar(fe,i.CesiumMath.EPSILON5,Ze),a.Cartesian3.add(ha,pa,ha),a.Cartesian3.add(he,pa,he),a.Cartesian3.add(de,pa,de),a.Cartesian3.add(le,pa,le),ve(ha,he),ve(de,le),a.Cartesian3.pack(ha,_,Y),a.Cartesian3.pack(he,_,Y+3),a.Cartesian3.pack(le,_,Y+6),a.Cartesian3.pack(de,_,Y+9),pa=a.Cartesian3.multiplyByScalar(fe,-2*i.CesiumMath.EPSILON5,Ze),a.Cartesian3.add(ha,pa,ha),a.Cartesian3.add(he,pa,he),a.Cartesian3.add(de,pa,de),a.Cartesian3.add(le,pa,le),ve(ha,he),ve(de,le),a.Cartesian3.pack(ha,_,Y+12),a.Cartesian3.pack(he,_,Y+15),a.Cartesian3.pack(le,_,Y+18),a.Cartesian3.pack(de,_,Y+21),G+=2,d+=3,V+=16,Y+=24,F+=32,ne+=ue,ie+=na}var da=d=0;for(h=0;h<v;h++){for(B=0;B<Ke;B++)E[d+B]=Qe[B]+da;da+=8,d+=Ke}t=Je,e.BoundingSphere.fromVertices(r,a.Cartesian3.ZERO,3,t[0]),e.BoundingSphere.fromVertices(s,a.Cartesian3.ZERO,3,t[1]);var ga=e.BoundingSphere.fromBoundingSpheres(t);return ga.radius+=re/(2*v),t={position:new C.GeometryAttribute({componentDatatype:o.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:_}),startHiAndForwardOffsetX:$e(b),startLoAndForwardOffsetY:$e(O),startNormalAndForwardOffsetZ:$e(k),endNormalAndTextureCoordinateNormalizationX:$e(A),rightNormalAndTextureCoordinateNormalizationY:$e(L)},p&&(t.startHiLo2D=$e(g),t.offsetAndRight2D=$e(f),t.startEndNormals2D=$e(m),t.texcoordNormalization2D=new C.GeometryAttribute({componentDatatype:o.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:w})),new C.Geometry({attributes:t,indices:E,boundingSphere:ga})}(w,T,G,Y,j,B,m)}};var le=new a.Cartesian3,ue=new e.Matrix3,ce=new e.Quaternion;function Ce(t,n,r,s){return n=q(r,n,le),n=a.Cartesian3.dot(n,t),(S<n||n<I)&&(r=q(s,r,J),n=n<I?i.CesiumMath.PI_OVER_TWO:-i.CesiumMath.PI_OVER_TWO,n=e.Quaternion.fromAxisAngle(r,n,ce),n=e.Matrix3.fromQuaternion(n,ue),e.Matrix3.multiplyByVector(n,t,t),!0)}var pe=new a.Cartographic,he=new a.Cartesian3,de=new a.Cartesian3;function ge(e,t,n,r,s){var o=a.Cartographic.toCartesian(t,e._ellipsoid,he),l=a.Cartesian3.add(o,n,de),u=!1,c=e._ellipsoid,C=c.cartesianToCartographic(l,pe);return Math.abs(t.longitude-C.longitude)>i.CesiumMath.PI_OVER_TWO&&(u=!0,l=a.Cartesian3.subtract(o,n,de),C=c.cartesianToCartographic(l,pe)),C.height=0,C=e.project(C,s),(s=a.Cartesian3.subtract(C,r,s)).z=0,s=a.Cartesian3.normalize(s,s),u&&a.Cartesian3.negate(s,s),s}var fe=new a.Cartesian3,me=new a.Cartesian3;function we(e,t,n,i,r,s){var o=a.Cartesian3.subtract(t,e,fe);a.Cartesian3.normalize(o,o),n=a.Cartesian3.multiplyByScalar(o,n-0,me),a.Cartesian3.add(e,n,r),n=a.Cartesian3.multiplyByScalar(o,i-1e3,me),a.Cartesian3.add(t,n,s)}var ye=new a.Cartesian3;function ve(e,t){var n=h.Plane.getPointDistance(K,e),r=h.Plane.getPointDistance(K,t),s=ye;i.CesiumMath.equalsEpsilon(n,0,i.CesiumMath.EPSILON2)?(s=q(t,e,s),a.Cartesian3.multiplyByScalar(s,i.CesiumMath.EPSILON2,s),a.Cartesian3.add(e,s,e)):i.CesiumMath.equalsEpsilon(r,0,i.CesiumMath.EPSILON2)&&(s=q(e,t,s),a.Cartesian3.multiplyByScalar(s,i.CesiumMath.EPSILON2,s),a.Cartesian3.add(t,s,t))}var Me=new a.Cartographic,Te=new a.Cartographic,Ee=new a.Cartesian3,_e=new a.Cartesian3,be=new a.Cartesian3,Oe=new a.Cartesian3,Pe=new a.Cartesian3,ke=new a.Cartesian3,Ae=[Me,Te],Le=new a.Rectangle,Se=new a.Cartesian3,Ie=new a.Cartesian3,xe=new a.Cartesian3,Ne=new a.Cartesian3,Re=new a.Cartesian3,De=new a.Cartesian3,ze=new a.Cartesian3,He=new a.Cartesian3,Be=new a.Cartesian3,je=new a.Cartesian3,Ge=new a.Cartesian3,Ve=new a.Cartesian3,Ye=new a.Cartesian3,Fe=new a.Cartesian3,qe=new c.EncodedCartesian3,Xe=new c.EncodedCartesian3,We=new a.Cartesian3,Ue=new a.Cartesian3,Ze=new a.Cartesian3,Je=[new e.BoundingSphere,new e.BoundingSphere],Qe=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],Ke=Qe.length;function $e(e){return new C.GeometryAttribute({componentDatatype:o.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return x._projectNormal=ge,function(e,a){return P.initialize().then((function(){return n.defined(a)&&(e=x.unpack(e,a)),x.createGeometry(e)}))}}));